<div class="container">
  <div class="form-container">
    <h2 class="page-title">体調記録の追加</h2>
    <%= form_with model: [@patient, @condition], local: true, class: 'condition-form' do |form| %>
      <%= form.hidden_field :patient_id, value: @patient.id %>
      
      <div class="form-group">
        <%= form.label :input_day, '記録日時', class: 'form-label' %>
        <%= form.datetime_local_field :input_day, value: Time.current.strftime("%Y-%m-%dT%H:%M"), required: true, class: 'form-control' %>
      </div>
      
      <div class="form-group">
        <%= form.label :temperature, '体温', class: 'form-label' %>
        <%= form.text_field :temperature, required: true, step: 'any', inputmode: 'decimal', class: 'form-control' %>
      </div>
      
      <div class="form-group">
        <%= form.label :eat, '食欲', class: 'form-label' %>
        <div class="radio-group">
          <%= form.radio_button :eat, 'あり', class: 'radio-input' %>
          <%= form.label :eat_あり, 'あり', class: 'radio-label' %>
          <%= form.radio_button :eat, 'なし', class: 'radio-input' %>
          <%= form.label :eat_なし, 'なし', class: 'radio-label' %>
        </div>
      </div>
      
      <div class="form-group">
        <%= form.label :moisture, '水分', class: 'form-label' %>
        <div class="radio-group">
          <%= form.radio_button :moisture, 'とれている', class: 'radio-input' %>
          <%= form.label :moisture_とれている, 'とれている', class: 'radio-label' %>
          <%= form.radio_button :moisture, 'とれていない', class: 'radio-input' %>
          <%= form.label :moisture_とれていない, 'とれていない', class: 'radio-label' %>
        </div>
      </div>
      
      <div class="form-group">
        <%= form.label :puke, '嘔吐', class: 'form-label' %>
        <div class="radio-group">
          <%= form.radio_button :puke, 'あり', class: 'radio-input' %>
          <%= form.label :puke_あり, 'あり', class: 'radio-label' %>
          <%= form.radio_button :puke, 'なし', class: 'radio-input' %>
          <%= form.label :puke_なし, 'なし', class: 'radio-label' %>
        </div>
      </div>
      
      <div class="form-group">
        <%= form.label :memo, 'メモ', class: 'form-label' %>
        <%= form.text_area :memo, class: 'form-control' %>
      </div>
      
      <div class="form-group">
        <%= form.label :images, '画像（複数選択可）', class: 'form-label' %>
        <%= form.file_field :images, multiple: true, accept: 'image/*', class: 'form-control' %>
      </div>

      <% if @condition.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@condition.errors.count, "error") %> prohibited this condition from being saved:</h2>
    <ul>
      <% @condition.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>
      
      <div class="form-actions">
        <%= form.submit '保存', class: 'btn btn-primary' %>
        <%= link_to '戻る', main_menu_path, class: 'btn btn-secondary' %>
      </div>
    <% end %>
  </div>
</div>